<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_napstabattle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>10</depth>
  <persistent>0</persistent>
  <parentName>obj_monsterparent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scr_monstersetup</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hurtanim = 0
hurtsound = snd_damage
talked = 0
whatiheard = -1
attacked = 0
killed = 0
global.heard = 0
takedamage = 0
outside=0
image_xscale=2
image_yscale=2
mercymod=-400
image_speed=0.2
obj_battlebg.image_index=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scr_monsterdefeat</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(OBJ_WRITER)=false then
   {
   alarm[7]=2
   }
else alarm[11]=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(blcon) then with blcon instance_destroy()

if image_alpha&gt;0.10 then
{
image_alpha-=0.05
alarm[10]=1
}
else
{
caster_stop(global.batmusic)
caster_free(global.batmusic)
global.typer=1
script_execute(scr_writetext,0,"* YOU WON!&amp;* You lost 1 experience point./%")
alarm[11]=1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(blconwriter)=false then 
   {
   alarm[10]=2
   }
   else alarm[9]=2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_goto(global.currentroom)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0,0,obj_unfader)
alarm[8]=10
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.monsterhp&gt;0 then
  {
  
  blcon = instance_create(x+sprite_width+21,ystart+24,obj_blconsm)  
  mycommand = round(random(100))
  if mycommand &gt;= 0 and mycommand &lt; 40 then global.msg[0] = "i'm&amp;fine,&amp;thanks."
  if mycommand &gt;= 40 and mycommand &lt; 66 then global.msg[0] = "just&amp;pluggin&amp;along..."
  if mycommand &gt;= 66 and mycommand  then global.msg[0] = "nnnnnn&amp;ggghhh."
  if whatiheard = 0 then global.msg[0] = "oh, i'm&amp;REAL&amp;funny."
  if whatiheard = 1 then global.msg[0] = "go&amp;ahead,&amp;do it."
  if whatiheard = 3 then global.msg[0] = "i'd just&amp;weigh&amp;you&amp;down."
  if whatiheard = 4 then global.msg[0] = "heh..."
  if whatiheard = 4 and mercymod&gt;-300 then global.msg[0] = "heh&amp;heh..."
  if whatiheard = 4 and mercymod&gt;-200 then global.msg[0] = "let me&amp;try..."
  if whatiheard !=4 and whatiheard !=3 and mercymod=-50 then
       {
       global.msg[0]="i knew&amp;it..."
       mercymod=-1200
       if instance_exists(blt_blookhat) then with blt_blookhat instance_destroy()
       }
  if whatiheard=3 and mercymod=-50 then
       {
       global.msg[0]="umm..."
       }
  if mercymod=-49 then 
      {
      global.msg[0]= "oh&amp;gee..."
      alarm[7]=60
      global.plot=10.3
      }
    else
    {
global.border = 3
if global.turn=1 then global.border=5
obj_heart.x = round((global.idealborder[0] + global.idealborder[1])/2) - 8
obj_heart.y = round((global.idealborder[2] + global.idealborder[3])/2) - 8
     }
     
global.msg[1] = "%%%"
global.typer = 2
blconwd = instance_create(blcon.x+15,blcon.y+10,OBJ_NOMSCWRITER)
     }
    else
       {
       if instance_exists(dmgwriter)
       with dmgwriter instance_destroy()
       blcon = instance_create(x+sprite_width+11,y+24,obj_blconwdflowey)
      global.msc=0
      global.msg[0]="umm... you do&amp;know you cant&amp;kill ghosts, right?/"
      global.msg[1]="we're sorta&amp;incorporeal and&amp;all/"
      global.msg[2]="i was just&amp;lowering my hp&amp;because i didnt&amp;want to be rude/"
      global.msg[3]="sorry..^1.&amp;i just made this&amp;more awkward.../"
      global.msg[4]="pretend you beat&amp; me.../"
      global.msg[5]="ooooooooo^1o%%"
      global.plot=11
      conversation=1
      image_speed=0.2
      global.typer = 2
      blconwriter = instance_create(obj_blconwdflowey.x+36,obj_blconwdflowey.y+10,OBJ_WRITER)
      alarm[9]=2
      }
      
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
with blconwd instance_destroy()
with blcon instance_destroy()
talked = 0
whatiheard=-1
global.mnfight = 2

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if sprite_index != spr_whimsunhurt then
//{
if shudder=16 then
{
dmgwriter = instance_create(x + sprite_width/2 - 48,y-20,obj_dmgwriter);
global.damage = takedamage
with (dmgwriter) dmg = global.damage
}
//sprite_index=spr_whimsunhurt
//sound_play(hurtsound)
//x=xstart
//y=ystart
//path_end()
//gravity=0
//}

//x = x + shudder
//if shudder &lt; 0 then shudder = -(shudder + 2)
//else shudder = -shudder
shudder-=2
 if shudder = 0 then
   {
   global.hurtanim[myself] = 2
   break;
   }
   
 alarm[3]=2

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.mnfight = 3 then attacked = 0

scr_blconmatch() //extend ballcons
  
if global.mnfight = 1 then
if talked = 0 then
    {
    if global.monsterhp[myself]&gt;0 then alarm[5] = 75
    if mercymod=-49 then alarm[5]=400
    alarm[6] = 1
    talked = 1
    global.heard = 0
    }

if keyboard_multicheck_pressed(vk_enter) //cuts balloons short
   {
   if alarm[5] &gt; 5 and obj_lborder.x = global.idealborder[0] then alarm[5] = 2
   }


if global.hurtanim[myself] = 1 then
{
shudder = 16
alarm[3] = global.damagetimer
global.hurtanim[myself] = 3
}

if global.hurtanim[myself] = 2 then
{
global.monsterhp[myself] -= takedamage
with (dmgwriter) alarm[2] = 15
   if global.monsterhp[myself] &gt;= 1 then
     {
    global.hurtanim[myself] = 0
   // sprite_index=spr_whimsun
    image_index = 0
    global.myfight = 0
    global.mnfight = 1
     }
   else
     {
     global.myfight = 0
     global.mnfight = 1
     }
}


if global.hurtanim[myself] = 5 then
{
global.damage=0
instance_create(x + sprite_width/2 - 48,y - 24,obj_dmgwriter);
with (obj_dmgwriter) alarm[2] = 30
global.myfight = 0
global.mnfight = 1
global.hurtanim[myself] = 0
}

if global.mnfight = 2 then
    {
    if attacked = 0 then
    {
    global.turntimer = 160
    if mercymod!=-100 then
    {
    if global.turn!=1 then
    {
    if mycommand &gt;=0 and mycommand &lt;=50 then
       {
       global.turntimer = 140
       global.firingrate= (4000/-(mercymod))
       gen=instance_create(0,0,obj_crygen1)
       }
    else 
       {
       global.turntimer = 170
       global.firingrate= (3600/-(mercymod))
       gen=instance_create(0,0,obj_crygen2)
       }
    }
    else
      {
      global.turntimer = 140
      gen=instance_create(global.idealborder[0]+30,global.idealborder[2]+30,obj_sadmsggen)
      }
    }
    else
       {
       global.turntimer=260
       global.firingrate=8
       instance_create(obj_napstablook.x+34,obj_napstablook.y-30,blt_blookhat)
       gen=instance_create(0,0,obj_crygen3)
       }
    gen.myself=myself
    gen.dmg=global.monsteratk[myself]
    if mycommand &gt;= 0 then global.msg[0] =  "* Napstablook is staring into&amp;  the distance."
    if mycommand &gt;= 30 then global.msg[0] = "* Napstablook is wishing they&amp;  weren't here."
    if mycommand &gt;= 70 then global.msg[0] = "* Napstablook is pretending to&amp;  sleep."
    if mycommand &gt;= 90 then global.msg[0] = "* The faint odor of ectoplasm&amp;  permeates the vicinity."
    if mercymod &gt; -400 then global.msg[0]  = "* Napstablook looks just a&amp;  little bit better."
    if mercymod &gt; -290 then global.msg[0]  = "* Cheering seems to have&amp;  improved Napstablook's&amp;  mood again."
    attacked = 1
    }
    }


if whatiheard=3 and instance_exists(OBJ_WRITER)=false then
   {
   script_execute(scr_mercystandard)
   if mercy &lt;0 then instance_destroy()
   }

    // talk commands and results
if global.myfight = 2 then
   {
      if whatiheard != -1
      {
      if global.heard = 0
       {
          if whatiheard = 0 then
               {
                   global.msc = 0
                   global.msg[0] = "* NAPSTABLOOK - ATK 10 DEF 10&amp;* This monster doesn't seem to&amp;  have a sense of humor.../^"
                   OBJ_WRITER.halt = 3
                   iii = instance_create(global.idealborder[0],global.idealborder[2],OBJ_WRITER)
                   with iii halt = 0
               }
           if whatiheard = 3 then // flirt
               {
                 global.myfight = 0
                 global.mnfight = 1    
               }
               
           if whatiheard = 1 then // threat
               {
                   global.msc = 0
                   global.msg[0] = "* You give Napstablook a&amp;  cruel look./^"
                   OBJ_WRITER.halt = 3
                   iii = instance_create(global.idealborder[0],global.idealborder[2],OBJ_WRITER)
                   with iii halt = 0
               }
           if whatiheard = 4 then // sing
               {
                   global.msc = 0
                     if mercymod=-50
                      {
                      mercymod=-49
                      caster_stop(global.batmusic)
                      caster_free(global.batmusic)
                      global.myfight = 0
                      global.mnfight = 1 
                      }
                      else
                      {
                   if mercymod&lt;-400 then global.msg[0] = "* You try to console&amp;  Napstablook.../^"
                   if mercymod=-400 then global.msg[0] = "* You gave Napstablook a&amp;  patient smile./^"
                   if mercymod=-300 then global.msg[0] = "* You told Napstablook a&amp;  little joke./^"
                   if mercymod=-200 then global.msg[0] = "* Napstablook wants to&amp;  show you something./^"
                   OBJ_WRITER.halt = 3
                   iii = instance_create(global.idealborder[0],global.idealborder[2],OBJ_WRITER)
                   with iii halt = 0
                   mercymod+=100
                   }
               }
         //  if whatiheard = 6 then
        //       {
        //           global.msc = 0
        //           global.msg[0] = "* Do robots dream of&amp;electric sex?/^"
       //            OBJ_WRITER.halt = 3
       //            iii = instance_create(global.idealborder[0],global.idealborder[2],OBJ_WRITER)
       //        }
       //        
        //    if whatiheard = 7 then
        //       {
        //           global.msc = 0
       //            global.msg[0] = "* I hate programming this./^"
         //          OBJ_WRITER.halt = 3
        //           iii = instance_create(global.idealborder[0],global.idealborder[2],OBJ_WRITER)
        //           with iii halt = 0
       //        }
               global.heard = 1
         }
         }
   }

if global.myfight=4 then
    {
    if global.mercyuse=0 then
      {
       script_execute(scr_mercystandard)
       if mercy &lt;0 then instance_destroy()
      }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if outside=0 then
{
OBJ_WRITER.halt=3
global.monster[myself]=0
if global.mnfight=2 then global.mnfight=1
outside=1
instance_destroy()
global.flag[13]=1
global.flag[14]=3
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
