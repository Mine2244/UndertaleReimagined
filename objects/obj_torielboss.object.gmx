<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_torielboss</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>10</depth>
  <persistent>0</persistent>
  <parentName>obj_monsterparent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scr_monstersetup</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>tt=0
hurtanim = 0
hurtsound = snd_damage
talked = 0
whatiheard = -1
attacked = 0
killed = 0
iwilltalk=0
global.heard = 0
takedamage = 0
outside=0
image_xscale=2
image_yscale=2
mercymod=-20000
image_speed=0
//global.mercy=1
global.seriousbattle=1
obj_battlebg.image_index=1
hplastturn=global.monsterhp[myself]
conversation=0
destroyed=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>scr_monsterdefeat</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.monster[0]=1
with obj_battlecontroller visible=0
global.xp+=500
scr_levelup()
with obj_hpname instance_destroy()
with obj_battlebg instance_destroy()
with obj_btparent instance_destroy()
with obj_borderparent instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(OBJ_WRITER)=false then
   {
   alarm[7]=2
   }
else alarm[11]=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(blcon) then with blcon instance_destroy()

if image_alpha&gt;0.10 then
{
sprite_index=spr_torielboss_kneelsmile2
y+=56
image_xscale=1
image_yscale=1
killed=1
room_speed=20
instance_create(obj_heart.x,sprite_height/2+y,obj_torheart)
global.flag[45]=4
ini_open("undertale.ini")
TK=ini_read_real("Toriel","TK",0)
ini_write_real("Toriel","TK",TK+1)
ini_close()
instance_destroy()
image_alpha-=0.05
alarm[10]=1
}
else
{
caster_stop(global.batmusic)
caster_free(global.batmusic)
global.typer=1
scr_writetext(0,"* YOU WON!&amp;* You lost 1 experience point./%",0 ,0) //TODO: ??
alarm[11]=1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(blconwriter)=false then 
   {
   alarm[10]=2
   }
   else alarm[9]=2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_goto(global.currentroom)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0,0,obj_unfader)
alarm[8]=10
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if hplastturn=global.monsterhp[myself] and global.talked=-1
   {
   conversation+=1
   iwilltalk=1
   }
   else iwilltalk=0
   
hplastturn=global.monsterhp[myself]
if global.monsterhp&gt;0 then
  {
  if iwilltalk=1
  {
  global.turntimer=-300
  alarm[5]+=70 
  if conversation=1 then global.msg[0] = " ....."
  if conversation=2 then global.msg[0] = " .....&amp; ....."
  if conversation=3 then global.msg[0] = " .....&amp; .....&amp; ....."
  if conversation=4 then global.msg[0] = " ...?"
  if conversation=5 then global.msg[0] = " What are&amp; you&amp; doing?"
  if conversation=6 then global.msg[0] = " Attack&amp; or run&amp; away!"
  if conversation=7 then global.msg[0] = " What are&amp; you&amp; proving&amp; this way?"
  if conversation=8 then global.msg[0] = " Fight me&amp; or&amp; leave!"
  if conversation=9 then global.msg[0] = " Stop it."
  if conversation=10 then instance_create(x,y,obj_torgen)
  if conversation=10 then global.msg[0]= " Stop&amp; looking&amp; at me&amp; that way."
  if conversation=11 then global.msg[0]=" Go away!"
    if conversation=12 then global.msg[0]=" ..."
    if conversation=12 then sprite_index=spr_torielboss_side
    if conversation=13 then global.msg[0]=" ...&amp; ..."
    if conversation=13 then sprite_index=spr_torielboss_sidesad
  if conversation&gt;13
     {
      alarm[5]+=400
      if conversation=14 then caster_free(global.batmusic) 
      global.mercy=1
       if conversation=14 then sprite_index=spr_torielboss_sad
       if conversation=14 then global.msg[0]="I know you want&amp;to go home^1, but..."
       if conversation&gt;15 then sprite_index=spr_torielboss_sadhappy
       if conversation=15 then global.msg[0]="But please... go&amp;upstairs now."
       if conversation=16 then global.msg[0]="I promise I will&amp;take good care&amp;of you here."
       if conversation=17 then global.msg[0]="I know we do not&amp;have much^1, but..."
       if conversation=18 then global.msg[0]="We can have a&amp;good life here."
       if conversation=19 then sprite_index=spr_torielboss_sad
       if conversation=19 then global.msg[0]="Why are you&amp;making this so&amp;difficult?"
       if conversation=20 then sprite_index=spr_torielboss_sidesad
       if conversation=20 then global.msg[0]="Please^1, go upstairs."
       if conversation=21 then sprite_index=spr_torielboss_sidesad2
       if conversation=21 then global.msg[0]="....."
       if conversation=22 then sprite_index=spr_torielboss_sidesadhappy
       if conversation=22 then global.msg[0]="Ha ha..."
       if conversation=23 then global.msg[0]="Pathetic^1, is it not^2?&amp;I cannot save even&amp;a single child."
       if conversation=24 then global.msg[0]="..."
       if conversation=24 then sprite_index=spr_torielboss_sidesad
       if conversation=25 then
                    {
                    sprite_index=spr_torielboss_neutral
                    alarm[5]=-6
                    conversation=99
                    global.flag[45]=5
                    ini_open("undertale.ini")
                    TS=ini_read_real("Toriel","TS",0)
                    ini_write_real("Toriel","TS",TS+1)
                    ini_close()
                    global.msg[0]="No^1, I understand./"
                    global.msg[1]="You would just be&amp;unhappy trapped&amp;down here./"
                    global.msg[2]="The RUINS are very&amp;small once you&amp;get used to them./"
                    global.msg[3]="It would not be&amp;right for you to&amp;grow up in a&amp;place like this./"
                    global.msg[4]="My expectations...&amp;My loneliness...&amp;My fear.../"
                    global.msg[5]="For you^1, my child...&amp;I will put them aside./%%"
                    global.mnfight=99
                    global.myfight=0
                    }
                    
       blcon = instance_create(x+sprite_width+3,y+32,obj_blconwdflowey)
       global.typer = 8
       blconwd = instance_create(obj_blconwdflowey.x+36,obj_blconwdflowey.y+10,OBJ_NOMSCWRITER)
     }
     else blcon = instance_create(x+sprite_width+21,ystart+24,obj_blconsm)
    global.typer = 8
    if instance_exists(obj_blconsm)
    blconwd = instance_create(blcon.x+15,blcon.y+10,OBJ_NOMSCWRITER)
     }
     }
    else
       {
       destroyed=1
       global.faceemotion=0
       caster_free(global.batmusic)
       if instance_exists(dmgwriter)
       with dmgwriter instance_destroy()
       blcon = instance_create(x+sprite_width+2,y+36,obj_blconwdflowey)
      global.msc=0
      global.msg[0]="\E0Urgh.../"
      global.msg[1]="\E0You are stronger&amp;than I thought.../"
      global.msg[2]="Listen to me^1,&amp; small one.../"
      global.msg[3]="If you go beyond&amp;this door,/"
      global.msg[4]="Keep walking as&amp;far as you can./"
      global.msg[5]="Eventually you will&amp;reach an exit./"
      global.msg[6]="\E1..^1.&amp;..../"
      global.msg[7]="Do not let them&amp;take your soul./"
      global.msg[8]="Asgore's plan&amp;cannot be allowed&amp;to succeed./"
      global.msg[9]="\E2....../"
      global.msg[10]="Be good^1,&amp;won't you?/"
      global.msg[11]="\E3My child.      %%" 
      if global.flag[202]&gt;=monsterpopulation1
          {
          global.faceemotion=4
          global.msg[0]="Y... you...&amp;really hate me&amp;that much?/"
          global.msg[1]="Now I see who I&amp;was protecting by&amp;keeping you here./"
          global.msg[2]="Not you.../"
          global.msg[3]="\E5But them!/"
          global.msg[4]="\E3Ha... ha... %%"
          }
      if conversation&gt;13 then
          {
          global.faceemotion=4
          global.msg[0]="\E4You.../"
          global.msg[1]="... at my most&amp;vulnerable&amp;moment.../"
          global.msg[2]="To think I was&amp;worried you&amp;wouldn't fit&amp;in out there.../"
          global.msg[3]="\E5Eheheheh!!!&amp;You really are&amp;no different than&amp;them!/"
          global.msg[4]="\E3Ha... ha... %%"
          }
      global.plot=11
      conversation=1
      image_speed=0.2
      global.typer = 12
      blconwriter = instance_create(obj_blconwdflowey.x+36,obj_blconwdflowey.y+10,OBJ_WRITER)
      alarm[9]=2
      }

mycommand=round(random(100))
global.border = 6
obj_heart.x = round((global.idealborder[0] + global.idealborder[1])/2) - 8
obj_heart.y = round((global.idealborder[2] + global.idealborder[3])/2) - 8
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(OBJ_NOMSCWRITER)
    with blconwd instance_destroy()
if instance_exists(obj_blconsm)
    with blcon instance_destroy()
    if instance_exists(obj_blconwdflowey)
    with obj_blconwdflowey instance_destroy()
talked = 0
whatiheard=-1
global.mnfight = 2
if mycommand&lt;40 or global.hp&lt;3 then global.border=7
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x=xstart
if sprite_index != spr_torielboss_hurt and sprite_index != spr_torielboss_reallyhurt and sprite_index != spr_torielboss_murdered
{
if shudder=16 or shudder=32 then
  {
  dmgwriter = instance_create(x + sprite_width/2 - 48,y-20,obj_dmgwriter);
  global.damage = takedamage
  with (dmgwriter) dmg = global.damage
  if conversation&lt;4
  then conversation=0
  }
sprite_index=spr_torielboss_hurt
if global.damage&gt;100 then { sprite_index=spr_torielboss_reallyhurt; caster_set_volume(global.batmusic,0); }
if global.damage&gt;100 and conversation&gt;13 then { sprite_index=spr_torielboss_murdered}
if global.flag[202]&gt;=monsterpopulation1 then { sprite_index=spr_torielboss_murdered}
sound_play(hurtsound)
}

x = x + shudder
if shudder &lt; 0 then shudder = -(shudder + 2)
else shudder = -shudder
shudder-=2
 if shudder = 0 then
   {
   global.hurtanim[myself] = 2
   exit;
   }
   
 alarm[3]=2
 if global.damage&gt;100 then alarm[3]=3

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>obj_heart.x=-200
global.border=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.mnfight = 3 then attacked = 0

if alarm[5] &gt; 0 //makes all of the monsters extend their balloons as long as the longest one
  {
  if global.monster[0] = 1 if global.monsterinstance[0].alarm[5] &gt; alarm[5] then alarm[5] = global.monsterinstance[0].alarm[5]
  if global.monster[1] = 1 if global.monsterinstance[1].alarm[5] &gt; alarm[5] then alarm[5] = global.monsterinstance[1].alarm[5]
  if global.monster[2] = 1 then if global.monsterinstance[2].alarm[5] &gt; alarm[5] then alarm[5] = global.monsterinstance[2].alarm[5]
  }
  
if global.mnfight = 1 then
if talked = 0 then
    {
    if global.monsterhp[myself]&gt;0 then alarm[5] = 15
    if mercymod=-49 then alarm[5]=400
    alarm[6] = 2
    talked = 1
    global.heard = 0
    }

if keyboard_multicheck_pressed(vk_enter) //cuts balloons short
   {
   if conversation&lt;13 then
   if alarm[5] &gt; 5 and obj_lborder.x = global.idealborder[0] then alarm[5] = 2
   if conversation&gt;=13 and conversation!=99 then if instance_exists(OBJ_NOMSCWRITER)
   if OBJ_NOMSCWRITER.stringpos &gt;= string_length(OBJ_NOMSCWRITER.mystring) then alarm[5]=2
   }


if global.hurtanim[myself] = 1 then
{
shudder = 16
alarm[3] = global.damagetimer
if global.damage&gt;100 then shudder=32
global.hurtanim[myself] = 3
}

if global.hurtanim[myself] = 2 then
{
global.monsterhp[myself] -= takedamage
with (dmgwriter) alarm[2] = 15
if global.damage&gt;100 then with dmgwriter alarm[2]=60

if global.monsterhp[myself]&lt;=150 then global.monsterdef[myself]=-140
   if global.monsterhp[myself] &gt;= 1 then
     {
    global.hurtanim[myself] = 0
    if conversation&lt;13 then
      {
     if global.hp&gt;2 then sprite_index=spr_torielboss
     if global.hp&lt;=2 then sprite_index=spr_torielboss_side
     }
    image_index = 0
    global.myfight = 0
    global.mnfight = 1
     }
   else
     {
     global.myfight = 0
     global.mnfight = 1
     }
}


if global.hurtanim[myself] = 5 then
{
global.damage=0
instance_create(x + sprite_width/2 - 48,y - 24,obj_dmgwriter);
with (obj_dmgwriter) alarm[2] = 30
global.myfight = 0
global.mnfight = 1
global.hurtanim[myself] = 0
}

if global.mnfight = 2 then
    {
    if attacked = 0 then
    {
    global.turntimer = 160
    if global.hp&gt;2 then
    {
   // if global.turn!=1 then
   //{
    if mycommand &gt;=0 and mycommand &lt;=20 then
       {
       global.turntimer = 140
       global.firingrate=5
       gen=instance_create(0,0,obj_1sidegen)
       gen.bullettype=7
       }
    if mycommand &gt;20 and mycommand &lt;=40 then
       {
       global.turntimer = 140
       global.firingrate=2
       gen=instance_create(0,0,obj_1sidegen)
       gen.bullettype=8
       }
    if mycommand &gt;80 and mycommand &lt;=100 then
       {
       global.turntimer = 200
       global.firingrate=2
       gen=instance_create(global.idealborder[0]-45,global.idealborder[2]+5,blt_handbullet1)
       if global.hp&gt;6 then gen.dmg=5
       }
    if mycommand &gt;60 and mycommand &lt;=80 then
       {
       global.turntimer = 200
       global.firingrate=2
       gen=instance_create(global.idealborder[0]-45,global.idealborder[2]+5,blt_handbullet1)
       gen.x1=1
       if global.hp&gt;6 then gen.dmg=5
       gen2=instance_create(global.idealborder[1]+5,global.idealborder[3]-15,blt_handbullet2)
       if global.hp&gt;6 then gen2.dmg=5
       }
    if mycommand &gt;40 and mycommand &lt;=60 then
       {
       global.turntimer = 140
       global.firingrate=6
       gen=instance_create(0,0,obj_1sidegen)
       gen.bullettype=10
       }
    }
    else
        {
        if global.monsterhp[myself]&gt;150 then global.monsterdef[myself]=-15
       global.turntimer = 140
       global.firingrate=2
       gen=instance_create(0,0,obj_1sidegen)
       if conversation&lt;13 then instance_create(x,y,obj_torgen)
       gen.bullettype=9
       }
    if conversation&gt;13 then { global.turntimer=1; global.monsterdef[myself]=-2000; }
    if global.flag[202]&gt;=monsterpopulation1 then global.monsterdef[myself]=-9999
    gen.myself=myself
    gen.dmg=global.monsteratk[myself]
    if mycommand &gt;= 0 then global.msg[0] =  "* Toriel prepares a magical&amp;  attack."
    if mycommand &gt;= 30 then global.msg[0] = "* Toriel looks through you."
    if mycommand &gt;= 70 then global.msg[0] = "* Toriel is acting aloof."
    if mycommand &gt;= 90 then global.msg[0] = "* Toriel takes a deep breath."
    if conversation&gt;13 then
          {
          global.msg[0]="* ..."
          }
   // if mercymod &gt; -400 then global.msg[0]  = "* Napstablook looks just a&amp;  little bit better."
  //  if mercymod &gt; -290 then global.msg[0]  = "* Cheering seems to have&amp;  improved Napstablook's&amp;  mood again."
    attacked = 1
    }
    }


if whatiheard=3 and instance_exists(OBJ_WRITER)=false then
   {
   scr_mercystandard()
   if mercy &lt;0 then instance_destroy()
   }

    // talk commands and results
if global.myfight = 2 then
   {
      if whatiheard != -1
      {
      if global.heard = 0
       {
          if whatiheard = 0 then
               {
                   global.msc = 0
                   global.msg[0] = "* TORIEL - ATK 80 DEF 80&amp;* Knows best for you./^"
                   OBJ_WRITER.halt = 3
                   iii = instance_create(global.idealborder[0],global.idealborder[2],OBJ_WRITER)
                   with iii halt = 0
               }
          if whatiheard = 3 then
               {
                   tt+=1
                   global.msc = 0
                   global.msg[0] = "* You couldn't think of&amp;  any conversation&amp;  topics./^"
                   ini_open("undertale.ini")
                   TK=ini_read_real("Toriel","TK",0)
                   ini_close()
                   if tt&gt;1 then global.msg[0]="* You tried to think&amp;  of something to say&amp;  again^1, but.../^"
                   if tt&gt;2 then global.msg[0]="* Ironically^1, talking does not&amp;  seem to be the solution&amp;  to this situation./^"
                   if TK&gt;0 then { global.msg[0]="* You thought about telling&amp;  Toriel that you saw&amp;  her die./"; global.msg[1]="* But...&amp;* That's creepy./"; global.msg[2]="* Can you show mercy without&amp;  fighting or running&amp;  away...?/^" }
                   if TK&gt;0 and tt&gt;1 then global.msg[0]="* Can you show mercy&amp;  without running away...?/^"
                   if global.flag[202]&gt;=monsterpopulation1 then { global.msg[0]="* Not worth talking to./^" }
                   
                   OBJ_WRITER.halt = 3
                   iii = instance_create(global.idealborder[0],global.idealborder[2],OBJ_WRITER)
                   with iii halt = 0
               }
               global.heard = 1
         }
         }
   }

if global.myfight=4 then
    {
    if global.mercyuse=0 then
      {
       scr_mercystandard()
       if mercy &lt;0 then instance_destroy()
      }
    }
    
if destroyed=1 then
   {
   if global.faceemotion=0 then {sprite_index=spr_torielboss_kneel; global.typer=12}
   if global.faceemotion=1 then {sprite_index=spr_torielboss_kneelanguish; global.typer=13}
   if global.faceemotion=2 then {sprite_index=spr_torielboss_kneelanguish2; global.typer=14}
   if global.faceemotion=3 then {sprite_index=spr_torielboss_kneelsmile; global.typer=15}
    if global.faceemotion=4 then {sprite_index=spr_torielboss_murdered; image_speed=0; image_index=0; global.typer=13}
     if global.faceemotion=5 then image_index=1
  if instance_exists(OBJ_WRITER) then
    with OBJ_WRITER SCR_TEXTTYPE(global.typer)
   global.facechange=1
   }
   
if conversation=99 and instance_exists(OBJ_WRITER)=false then
   {
   if instance_exists(OBJ_NOMSCWRITER)
    with blconwd instance_destroy()
    if instance_exists(obj_blconsm)
    with blcon instance_destroy()
    if instance_exists(obj_blconwdflowey)
    with obj_blconwdflowey instance_destroy()
   obj_battlecontroller.runaway=1
   conversation=56
   global.flag[45]=5
   alarm[2]=20
   instance_create(0,0,obj_unfader)
   }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if outside=0 then
{
OBJ_WRITER.halt=3
global.monster[myself]=0
if global.mnfight=2 then global.mnfight=1
outside=1
instance_destroy()
global.flag[13]=1
global.flag[14]=3
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
